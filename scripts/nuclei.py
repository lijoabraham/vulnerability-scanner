import typer
import subprocess

app = typer.Typer()


@app.command()
def run_nuclei(
    urls_file: str = typer.Option(
        ...,
        "-u",
        "--urls-file",
        help="Path to the file containing URLs",
        metavar="<urls-file>",
    ),
    templates_dir: str = typer.Option(
        ...,
        "-t",
        "--templates-dir",
        help="Path to the directory containing Nuclei templates",
        metavar="<templates-dir>",
    ),
):
    """
    Run Nuclei command for each URL in the provided file.
    """
    command = f"nuclei -l {urls_file} -ud {templates_dir} -o output.txt"
    typer.echo(f"Running command: {command}")
    try:
        subprocess.run(command, check=True, errors="ignore")
    except subprocess.CalledProcessError as e:
        typer.echo(f"Error executing command: {e}")


if __name__ == "__main__":
    app()
